schema: '2.0'
stages:
  preprocess:
    cmd: python src/preprocess.py
    deps:
    - path: data/raw/data.xlsx
      hash: md5
      md5: 5878791f8961af5143d726b8a2964c0f
      size: 1055731
    - path: params.yaml
      hash: md5
      md5: 4db94a689c59111c6dc08d787af72e28
      size: 458
    - path: src/preprocess.py
      hash: md5
      md5: edb5325804150f45627fe4df806d0d74
      size: 2041
    params:
      params.yaml:
        data.processed_path: data/processed/train_test.joblib
        data.raw_path: data/raw/data.xlsx
        features.categorical_columns:
        - GS
        features.drop_columns:
        - cond rate
        - gas rate
        - sum cond
        - sum gas
        features.target: NPV
        preprocessing.random_state: 42
        preprocessing.test_size: 0.2
    outs:
    - path: data/processed/train_test.joblib
      hash: md5
      md5: 7529128e1d84fb367ab8192fbea58247
      size: 928180
    - path: models/encoder.joblib
      hash: md5
      md5: 97a5994e25d699c849c80f9c73a8db1b
      size: 1389
    - path: models/feature_columns.joblib
      hash: md5
      md5: bbb3a22cce65e92d97561c19fee2f343
      size: 109
  train:
    cmd: python src/train.py
    deps:
    - path: data/processed/train_test.joblib
      hash: md5
      md5: 7529128e1d84fb367ab8192fbea58247
      size: 928180
    - path: params.yaml
      hash: md5
      md5: 4db94a689c59111c6dc08d787af72e28
      size: 458
    - path: src/train.py
      hash: md5
      md5: 17df8e596ca8f2f2efb84f769919b15b
      size: 2413
    params:
      params.yaml:
        model.hyperparameters:
          n_estimators: 200
          max_depth: 6
          learning_rate: 0.05
          subsample: 0.8
        model.name: xgboost
        training.cv_folds: 5
        training.scoring: r2
    outs:
    - path: models/metrics.json
      hash: md5
      md5: dd5792c2472797a546eb2ceda7364978
      size: 163
    - path: models/model.joblib
      hash: md5
      md5: 9b61437fe31e085811cdc1771d2af651
      size: 471151
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/processed/train_test.joblib
      hash: md5
      md5: 7529128e1d84fb367ab8192fbea58247
      size: 928180
    - path: models/model.joblib
      hash: md5
      md5: 9b61437fe31e085811cdc1771d2af651
      size: 471151
    - path: src/evaluate.py
      hash: md5
      md5: d188b0517ac9098e19eaccf70bc0a79e
      size: 1638
    outs:
    - path: models/evaluation.json
      hash: md5
      md5: df5876fbd25be41e43cdc4750d62248d
      size: 433
  generate_report:
    cmd: python src/generate_report.py
    deps:
    - path: models/evaluation.json
      hash: md5
      md5: df5876fbd25be41e43cdc4750d62248d
      size: 433
    - path: models/metrics.json
      hash: md5
      md5: dd5792c2472797a546eb2ceda7364978
      size: 163
    - path: params.yaml
      hash: md5
      md5: 4db94a689c59111c6dc08d787af72e28
      size: 458
    - path: src/generate_report.py
      hash: md5
      md5: c560a7a9c25118b5036412f52e0e49d0
      size: 1712
    outs:
    - path: reports/model_report.json
      hash: md5
      md5: c2434b128cfecd4b882f616608afff04
      size: 776
  register:
    cmd: python src/register_model.py
    deps:
    - path: params.yaml
      hash: md5
      md5: 4db94a689c59111c6dc08d787af72e28
      size: 458
    - path: src/register_model.py
      hash: md5
      md5: e1cc9c50645a29659d97cc4835cfd39d
      size: 3861
    params:
      params.yaml:
        model.name: xgboost
    outs:
    - path: registry/model_info.json
      hash: md5
      md5: 5f57b051a9739bb258314ba8fd9a09a7
      size: 178
