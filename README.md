### üéØ NPV Prediction - Oil & Gas ML Project

![Python](https://img.shields.io/badge/Python-3.9%2B-blue)
![MLOps](https://img.shields.io/badge/MLOps-DVC%20%2B%20MLflow-orange)
![API](https://img.shields.io/badge/API-FastAPI-green)
![UI](https://img.shields.io/badge/UI-Streamlit-red)

–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ NPV (Net Present Value) –¥–ª—è –Ω–µ—Ñ—Ç–µ–≥–∞–∑–æ–≤—ã—Ö —Å–∫–≤–∞–∂–∏–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–æ–ª–Ω–æ–≥–æ MLOps –ø–∞–π–ø–ª–∞–π–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –≥–µ–æ–ª–æ–≥–æ—Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
oil_2/
‚îú‚îÄ‚îÄ üìä data/ # –î–∞–Ω–Ω—ã–µ (–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ DVC)
‚îÇ ‚îú‚îÄ‚îÄ raw/ # –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ ‚îî‚îÄ‚îÄ processed/ # –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ üîß src/ # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø–∞–π–ø–ª–∞–π–Ω–∞
‚îÇ ‚îú‚îÄ‚îÄ preprocess.py # –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ ‚îú‚îÄ‚îÄ train.py # –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
‚îÇ ‚îú‚îÄ‚îÄ evaluate.py # –û—Ü–µ–Ω–∫–∞ –º–æ–¥–µ–ª–∏
‚îÇ ‚îú‚îÄ‚îÄ generate_report.py # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
‚îÇ ‚îî‚îÄ‚îÄ register_model.py # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ MLflow
‚îú‚îÄ‚îÄ ü§ñ models/ # –ú–æ–¥–µ–ª–∏ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (DVC)
‚îú‚îÄ‚îÄ üìà mlruns/ # MLflow —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ üìù notebooks/ # EDA –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ üìÑ reports/ # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã
‚îú‚îÄ‚îÄ üè∑Ô∏è registry/ # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª—è—Ö
‚îî‚îÄ‚îÄ ‚öôÔ∏è config/ # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã


___

#### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python 3.9+**
- **Git**
- **DVC** 
- **MLflow** 
___
### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
```bash
git clone https://github.com/yourusername/oil_2.git
cd oil_2

–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
# –ü—Ä–∏
bash
python -m venv oil
source oil/bin/activate  # Linux/Mac
# –∏–ª–∏
oil\Scripts\activate     # Windows
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

bash
pip install -r requirements.txt
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è DVC

bash
dvc init
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ remote storage (–ø—Ä–∏–º–µ—Ä –¥–ª—è Google Drive)
dvc remote add -d myremote gdrive://your-folder-id
–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

bash
dvc pull
–ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞
bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ ML –ø–∞–π–ø–ª–∞–π–Ω–∞
dvc repro

–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
bash
# 1. FastAPI —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 8001)
python app.py

# 2. MLflow UI (–ø–æ—Ä—Ç 5005)
mlflow server --backend-store-uri file:mlruns --host localhost --port 5005

# 3. Streamlit UI (–ø–æ—Ä—Ç 8501)
streamlit run streamlit_app.py
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ:

API Docs: http://localhost:8000/docs

MLflow UI: http://localhost:5005

Streamlit App: http://localhost:8501

###     üìä ML Pipeline
–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç DVC –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–Ω—ã–º ML –ø–∞–π–ø–ª–∞–π–Ω–æ–º:

–≠—Ç–∞–ø—ã –ø–∞–π–ø–ª–∞–π–Ω–∞ (dvc.yaml)
Preprocessing - –æ—á–∏—Å—Ç–∫–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
Training - –æ–±—É—á–µ–Ω–∏–µ XGBoost –º–æ–¥–µ–ª–∏ —Å –∫—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
Evaluation - –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –º–æ–¥–µ–ª–∏ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
Reporting - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞
Registration - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ –≤ MLflow Registry

–ú–æ–¥–µ–ª—å –∏ –º–µ—Ç—Ä–∏–∫–∏
–ê–ª–≥–æ—Ä–∏—Ç–º: XGBoost Regressor

–¶–µ–ª–µ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è: NPV (Net Present Value)

–ú–µ—Ç—Ä–∏–∫–∏: R¬≤, MAE, MAPE, Cross-validation scores

–í–∞–ª–∏–¥–∞—Ü–∏—è: 5-fold cross-validation



# –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –∫ FastAPI
python
import requests

# –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
data = {
    "Heff": 15.0,      # –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ç–æ–ª—â–∏–Ω–∞
    "Perm": 150.0,     # –ü—Ä–æ–Ω–∏—Ü–∞–µ–º–æ—Å—Ç—å
    "Sg": 0.75,        # –ì–∞–∑–æ–Ω–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å
    "L_hor": 600.0,    # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞
    "GS": "S-TYPE",    # –¢–∏–ø —Å—Ç–≤–æ–ª–∞
    "temp": 25.0,      # –¢–µ–º–ø –ø–∞–¥–µ–Ω–∏—è
    "C5": 0.6,         # –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ C5+
    "GRP": 2,          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞–¥–∏–π –ì–†–ü
    "nGS": 3           # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç–≤–æ–ª–æ–≤
}

# –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
response = requests.post("http://localhost:8000/predict", json=data)
result = response.json()
print(f"Predicted NPV: ${result['predicted_NPV']:,.2f}")